import{r as a,j as i,a as f,F as J,R as K,c as q}from"./clsx.m-340daf83.js";import{G as $,a as Q,b as Z}from"./index.esm-ee9d2602.js";import{p}from"./index-4d501b15.js";import{n as G}from"./notify-4fa6a864.js";import{p as ee}from"./uitls-6342bc87.js";import{T as te}from"./Table-ca06eba1.js";import{L as ne}from"./logo-link-7aec32af.js";import{k as se}from"./ReactToastify-2767fbe6.js";import"./Box-b9249870.js";class I{constructor({x:t,y:s}){this.x=t,this.y=s,this.imgX=t,this.imgY=s,this.id=t+"_"+s}moveTo(t,s){this.x=t,this.y=s}}class re{constructor({size:t={x:3,y:3}}){this.size=t,this.puzzle=[],[...Array(t.x).keys()].forEach(s=>{[...Array(t.y).keys()].forEach(r=>{this.puzzle.push(new I({x:s,y:r}))})}),this.startTime=null,this.pauseTime=null,this.endTime=null,this.moves=null,this.removedPiece=null,this.slot=null,this.gameWon=!1}getBoard(){return this.puzzle.map(t=>({...t,canPlay:this.canPlay(t.x,t.y)}))}start(){this.slot||(this.removedPiece={x:0,y:0},this.slot={...this.removedPiece},this.puzzle=this.puzzle.filter(({x:t,y:s})=>!(t===this.slot.x&&s===this.slot.y)),this.shuffle(1e6),this.startTime=new Date().getTime(),this.pauseTime=null,this.endTime=null,this.gameWon=!1,this.moves=[])}canPlay(t,s){return!this.slot||t===this.slot.x&&s===this.slot.y?!1:t===this.slot.x&&Math.abs(s-this.slot.y)===1||s===this.slot.y&&Math.abs(t-this.slot.x)===1}play(t,s){return this.move(t,s)?(this.moves.push({x:t,y:s}),this.checkIfWon()):!1}move(t,s){return this.canPlay(t,s)?(this.puzzle.find(r=>r.x===t&&r.y===s).moveTo(this.slot.x,this.slot.y),this.slot={x:t,y:s},!0):!1}getElapsedTime(){return this.startTime?this.endTime?Math.floor((this.endTime-this.startTime)/1e3):this.pauseTime?Math.floor((this.pauseTime-this.startTime)/1e3):Math.floor((new Date().getTime()-this.startTime)/1e3):0}checkIfWon(){if(this.gameWon)return!0;const t=this.puzzle.reduce((s,r)=>!s||r.x!==r.imgX||r.y!==r.imgY?!1:s,!0);if(t){this.gameWon=t,this.endTime=new Date().getTime();const s=new I({...this.removedPiece});s.moveTo(-1,-1),this.puzzle.push(s),setTimeout(()=>s.moveTo(s.imgX,s.imgY),100),this.slot=null,this.removedPiece=null}return t}possibleMoves(t=null){return this.puzzle.filter(({x:s,y:r,id:e})=>this.canPlay(s,r)&&e!==(t==null?void 0:t.id))}shuffle(t=1e3){let s=[],r=null;for(let e=0;e<t;e++)s=this.possibleMoves(r),r=s[Math.floor(Math.random()*s.length)],this.move(r.x,r.y);this.slotToPosition(0,0)}slotToPosition(t,s){let r;for(;this.slot.x!==t||this.slot.y!==s;)r=this.possibleMoves().reduce((e,o)=>{const l=Math.abs(o.x-t)+Math.abs(o.y-s);return!e||(e==null?void 0:e.distance)>l?{piece:o,distance:l}:e},null),this.move(r.piece.x,r.piece.y)}togglePause(){this.startTime&&(this.pauseTime?(this.startTime=new Date().getTime()-(this.pauseTime-this.startTime),this.pauseTime=null):this.pauseTime=new Date().getTime())}}const ie=["img2.jpg","spider.jpg","mario.jpg","avengers.jpg"],j=(n=[])=>{const t=ie.filter(s=>!n.includes(s));return t[Math.floor(Math.random()*t.length)]},_=a.createContext({size:{x:0,y:0},setSize:()=>{},game:null,board:[],start:()=>{},play:(n,t)=>{},togglePause:()=>{},puzzleImage:null,pickNewImage:()=>{},isFinished:!1,setIsFinished:()=>{}}),F=({children:n})=>{const[t,s]=a.useState({x:3,y:3}),[r,e]=a.useState(!1),[o,l]=a.useState(()=>j()),[u,m]=a.useState(null),[c,h]=a.useState(null),[g,d]=a.useState(null);a.useEffect(()=>{o&&m("/assets/game/"+o)},[o]),a.useEffect(()=>{h(new re({size:t}))},[t,o]),a.useEffect(()=>{c&&d(c.getBoard())},[c]);const y=a.useCallback(()=>{c&&(c.start(),d(c.getBoard()))},[c]),v=a.useCallback((w,b)=>{if(!c)return;const D=c.play(w,b);return d(c.getBoard()),D?(setTimeout(()=>d(c.getBoard()),300),!0):!1},[c]),x=a.useCallback(()=>{c&&(c.togglePause(),d(c.getBoard()))},[c]),T=a.useCallback(()=>{l(j())},[]);return i(_.Provider,{value:{size:t,setSize:s,game:c,board:g,start:y,play:v,togglePause:x,puzzleImage:u,pickNewImage:T,isFinished:r,setIsFinished:e},children:n})},P=a.createContext({isFinished:!1,setIsFinished:()=>{},gameStarted:!1,setGameStarted:()=>{},won:!1,setWon:()=>{},moves:0,setMoves:()=>{},timeDifference:{},SetTimeDifference:()=>{}}),oe=({children:n})=>{const[t,s]=a.useState(!1),[r,e]=a.useState(!1),[o,l]=a.useState(!1),[u,m]=a.useState(0),[c,h]=a.useState(""),[g,d]=a.useState([]);return i(P.Provider,{value:{isFinished:t,setIsFinished:s,gameStarted:r,setGameStarted:e,won:o,setWon:l,moves:u,setMoves:m,gameFinishingTime:c,setGameFinishingTime:h,setTimeDifference:d,timeDifference:g},children:n})},ae=({x:n,y:t,imgX:s,imgY:r,canPlay:e=!1,cellSize:o})=>{const{play:l,size:u,puzzleImage:m}=a.useContext(_),{setWon:c,won:h,setIsFinished:g,setMoves:d,setTimeDifference:y,timeDifference:v}=a.useContext(P);if(!m)return null;const x=(T,w)=>{l(T,w)&&(c(!0),y(b=>[...b,new Date]))};return i("div",{style:{top:t*o,left:n*o,height:o,width:o},className:"z-10 absolute overflow-hidden transition-all duration-300 ease-in-out  border border-[#fff3] "+(e?" cursor-pointer hover:opacity-80 hover:border-indigo-700":""),onClick:e?()=>x(n,t):void 0,children:i("div",{style:{backgroundImage:`url('${m}')`,top:-1*r*o,left:-1*s*o,height:u.y*o,width:u.x*o},className:"h-[500px] w-[400px] bg-cover bg-center absolute"})})},le=n=>{const t=a.useRef(n);return a.useEffect(()=>{t.current=n}),t},ce=le,ue=(n,t=100,s=!1)=>{const r=ce(n),e=a.useRef(),o=[t,s,r];function l(){e.current&&clearTimeout(e.current),e.current=void 0}a.useEffect(()=>l,o);function u(){e.current=void 0}return a.useCallback(function(){const m=arguments,{current:c}=e;if(c===void 0&&s)return e.current=setTimeout(u,t),r.current.apply(null,m);c&&clearTimeout(c),e.current=setTimeout(()=>{e.current=void 0,r.current.apply(null,m)},t)},o)},me=(n,t,s)=>{const r=a.useState(n);return[r[0],ue(r[1],t,s)]};function k(n,t,s,r){const e=a.useRef(s),o=a.useRef(r);a.useEffect(()=>{e.current=s,o.current=r}),a.useEffect(()=>{const l=n&&"current"in n?n.current:n;if(!l)return;let u=0;function m(...h){u||e.current.apply(this,h)}l.addEventListener(t,m);const c=o.current;return()=>{u=1,l.removeEventListener(t,m),c&&c()}},[n,t])}const de={},C=typeof window>"u"?null:window,fe=C&&typeof C.visualViewport<"u"?C.visualViewport:null,A=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],he=function(n){n===void 0&&(n=de);const{wait:t,leading:s,initialWidth:r=0,initialHeight:e=0}=n,[o,l]=me(typeof document>"u"?[r,e]:A,t,s),u=()=>l(A);return k(C,"resize",u),k(fe,"resize",u),k(C,"orientationchange",u),o},M=({children:n,onClick:t})=>i("div",{className:"z-20 absolute w-full h-full flex items-center justify-center",children:i("div",{className:`bg-gradient-to-br from-[#fd2a] to-[#03da]\r
                            w-full flex items-center justify-center py-16`,children:i("button",{className:`bg-gradient-to-r from-blue-200 to-indigo-400 rounded-full\r
                                 px-4 py-2 text-lg md:text-xl text-indigo-900 border-2 border-indigo-800\r
                                 hover:to-purple-800 hover:from-fuchsia-700 hover:text-white\r
                                 relative hover:-top-1 transition-all duration-300\r
                                 hover:shadow-lg hover:shadow-indigo-400\r
                                 flex flex-row gap-2 items-center justify-center\r
                                 active:from-fuchsia-600 active:to-purple-600`,onClick:t,children:n})})}),L=({icon:n=null,label:t="",children:s})=>f("div",{className:`flex flex-row justify-center items-center gap-2 text-gray-800\r
            bg-[#576CBC] py-2 px-3 rounded-xl flex-1 md:flex-none`,children:[i("div",{className:"text-2xl md:text-5xl font-bold",children:n}),f("div",{className:"flex flex-row items-center gap-2 justify-center text-xl md:text-md",children:[i("span",{children:!!t&&t+":"}),i("div",{className:"font-bold",children:s})]})]});function pe(n){return $({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M243.2 189.9V258c26.1 5.9 49.3 15.6 73.6 22.3v-68.2c-26-5.8-49.4-15.5-73.6-22.2zm223.3-123c-34.3 15.9-76.5 31.9-117 31.9C296 98.8 251.7 64 184.3 64c-25 0-47.3 4.4-68 12 2.8-7.3 4.1-15.2 3.6-23.6C118.1 24 94.8 1.2 66.3 0 34.3-1.3 8 24.3 8 56c0 19 9.5 35.8 24 45.9V488c0 13.3 10.7 24 24 24h16c13.3 0 24-10.7 24-24v-94.4c28.3-12.1 63.6-22.1 114.4-22.1 53.6 0 97.8 34.8 165.2 34.8 48.2 0 86.7-16.3 122.5-40.9 8.7-6 13.8-15.8 13.8-26.4V95.9c.1-23.3-24.2-38.8-45.4-29zM169.6 325.5c-25.8 2.7-50 8.2-73.6 16.6v-70.5c26.2-9.3 47.5-15 73.6-17.4zM464 191c-23.6 9.8-46.3 19.5-73.6 23.9V286c24.8-3.4 51.4-11.8 73.6-26v70.5c-25.1 16.1-48.5 24.7-73.6 27.1V286c-27 3.7-47.9 1.5-73.6-5.6v67.4c-23.9-7.4-47.3-16.7-73.6-21.3V258c-19.7-4.4-40.8-6.8-73.6-3.8v-70c-22.4 3.1-44.6 10.2-73.6 20.9v-70.5c33.2-12.2 50.1-19.8 73.6-22v71.6c27-3.7 48.4-1.3 73.6 5.7v-67.4c23.7 7.4 47.2 16.7 73.6 21.3v68.4c23.7 5.3 47.6 6.9 73.6 2.7V143c27-4.8 52.3-13.6 73.6-22.5z"}}]})(n)}function ge(n){return $({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"g",attr:{fillOpacity:".9"},child:[{tag:"path",attr:{d:"M255.8 48C141 48 48 141.2 48 256s93 208 207.8 208c115 0 208.2-93.2 208.2-208S370.8 48 255.8 48zm.2 374.4c-91.9 0-166.4-74.5-166.4-166.4S164.1 89.6 256 89.6 422.4 164.1 422.4 256 347.9 422.4 256 422.4z"}},{tag:"path",attr:{d:"M266.4 152h-31.2v124.8l109.2 65.5 15.6-25.6-93.6-55.5V152z"}}]}]})(n)}function U(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function B(n,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function W(n,t,s){return t&&B(n.prototype,t),s&&B(n,s),n}function H(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&N(n,t)}function z(n){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},z(n)}function N(n,t){return N=Object.setPrototypeOf||function(r,e){return r.__proto__=e,r},N(n,t)}function ve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ye(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function xe(n,t){return t&&(typeof t=="object"||typeof t=="function")?t:ye(n)}function V(n){var t=ve();return function(){var r=z(n),e;if(t){var o=z(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return xe(this,e)}}function Te(n){return we(n)||be(n)||Se(n)||Ce()}function we(n){if(Array.isArray(n))return O(n)}function be(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function Se(n,t){if(n){if(typeof n=="string")return O(n,t);var s=Object.prototype.toString.call(n).slice(8,-1);if(s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set")return Array.from(n);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return O(n,t)}}function O(n,t){(t==null||t>n.length)&&(t=n.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=n[s];return r}function Ce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,s=String(n);if(t===0)return s;var r=s.match(/(.*?)([0-9]+)(.*)/),e=r?r[1]:"",o=r?r[3]:"",l=r?r[2]:s,u=l.length>=t?l:(Te(Array(t)).map(function(){return"0"}).join("")+l).slice(t*-1);return"".concat(e).concat(u).concat(o)}var Y={daysInHours:!1,zeroPadTime:2};function Pe(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.now,r=s===void 0?Date.now:s,e=t.precision,o=e===void 0?0:e,l=t.controlled,u=t.offsetTime,m=u===void 0?0:u,c=t.overtime,h;typeof n=="string"?h=new Date(n).getTime():n instanceof Date?h=n.getTime():h=n,l||(h+=m);var g=l?h:h-r(),d=Math.min(20,Math.max(0,o)),y=Math.round(parseFloat(((c?g:Math.max(0,g))/1e3).toFixed(d))*1e3),v=Math.abs(y)/1e3;return{total:y,days:Math.floor(v/(3600*24)),hours:Math.floor(v/3600%24),minutes:Math.floor(v/60%60),seconds:Math.floor(v%60),milliseconds:Number((v%1*1e3).toFixed()),completed:y<=0}}function De(n,t){var s=n.days,r=n.hours,e=n.minutes,o=n.seconds,l=Object.assign(Object.assign({},Y),t),u=l.daysInHours,m=l.zeroPadTime,c=l.zeroPadDays,h=c===void 0?m:c,g=Math.min(2,m),d=u?S(r+s*24,m):S(r,g);return{days:u?"":S(s,h),hours:d,minutes:S(e,g),seconds:S(o,g)}}var X=function(n){H(s,n);var t=V(s);function s(){var r;return U(this,s),r=t.apply(this,arguments),r.state={count:r.props.count||3},r.startCountdown=function(){r.interval=window.setInterval(function(){var e=r.state.count-1;e===0?(r.stopCountdown(),r.props.onComplete&&r.props.onComplete()):r.setState(function(o){return{count:o.count-1}})},1e3)},r.stopCountdown=function(){clearInterval(r.interval)},r.addTime=function(e){r.stopCountdown(),r.setState(function(o){return{count:o.count+e}},r.startCountdown)},r}return W(s,[{key:"componentDidMount",value:function(){this.startCountdown()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return this.props.children?a.cloneElement(this.props.children,{count:this.state.count}):null}}]),s}(a.Component);X.propTypes={count:p.number,children:p.element,onComplete:p.func};var E=function(n){H(s,n);var t=V(s);function s(r){var e;if(U(this,s),e=t.call(this,r),e.mounted=!1,e.initialTimestamp=e.calcOffsetStartTimestamp(),e.offsetStartTimestamp=e.props.autoStart?0:e.initialTimestamp,e.offsetTime=0,e.legacyMode=!1,e.legacyCountdownRef=a.createRef(),e.tick=function(){var l=e.calcTimeDelta(),u=l.completed&&!e.props.overtime?void 0:e.props.onTick;e.setTimeDeltaState(l,void 0,u)},e.start=function(){if(!e.isStarted()){var l=e.offsetStartTimestamp;e.offsetStartTimestamp=0,e.offsetTime+=l?e.calcOffsetStartTimestamp()-l:0;var u=e.calcTimeDelta();e.setTimeDeltaState(u,"STARTED",e.props.onStart),!e.props.controlled&&(!u.completed||e.props.overtime)&&(e.clearTimer(),e.interval=window.setInterval(e.tick,e.props.intervalDelay))}},e.pause=function(){e.isPaused()||(e.clearTimer(),e.offsetStartTimestamp=e.calcOffsetStartTimestamp(),e.setTimeDeltaState(e.state.timeDelta,"PAUSED",e.props.onPause))},e.stop=function(){e.isStopped()||(e.clearTimer(),e.offsetStartTimestamp=e.calcOffsetStartTimestamp(),e.offsetTime=e.offsetStartTimestamp-e.initialTimestamp,e.setTimeDeltaState(e.calcTimeDelta(),"STOPPED",e.props.onStop))},e.isStarted=function(){return e.isStatus("STARTED")},e.isPaused=function(){return e.isStatus("PAUSED")},e.isStopped=function(){return e.isStatus("STOPPED")},e.isCompleted=function(){return e.isStatus("COMPLETED")},r.date){var o=e.calcTimeDelta();e.state={timeDelta:o,status:o.completed?"COMPLETED":"STOPPED"}}else e.legacyMode=!0;return e}return W(s,[{key:"componentDidMount",value:function(){this.legacyMode||(this.mounted=!0,this.props.onMount&&this.props.onMount(this.calcTimeDelta()),this.props.autoStart&&this.start())}},{key:"componentDidUpdate",value:function(e){this.legacyMode||this.props.date!==e.date&&(this.initialTimestamp=this.calcOffsetStartTimestamp(),this.offsetStartTimestamp=this.initialTimestamp,this.offsetTime=0,this.setTimeDeltaState(this.calcTimeDelta()))}},{key:"componentWillUnmount",value:function(){this.legacyMode||(this.mounted=!1,this.clearTimer())}},{key:"calcTimeDelta",value:function(){var e=this.props,o=e.date,l=e.now,u=e.precision,m=e.controlled,c=e.overtime;return Pe(o,{now:l,precision:u,controlled:m,offsetTime:this.offsetTime,overtime:c})}},{key:"calcOffsetStartTimestamp",value:function(){return Date.now()}},{key:"addTime",value:function(e){this.legacyCountdownRef.current.addTime(e)}},{key:"clearTimer",value:function(){window.clearInterval(this.interval)}},{key:"isStatus",value:function(e){return this.state.status===e}},{key:"setTimeDeltaState",value:function(e,o,l){var u=this;if(this.mounted){var m=e.completed&&!this.state.timeDelta.completed,c=e.completed&&o==="STARTED";m&&!this.props.overtime&&this.clearTimer();var h=function(){l&&l(u.state.timeDelta),u.props.onComplete&&(m||c)&&u.props.onComplete(e,c)};return this.setState(function(g){var d=o||g.status;return e.completed&&!u.props.overtime?d="COMPLETED":!o&&d==="COMPLETED"&&(d="STOPPED"),{timeDelta:e,status:d}},h)}}},{key:"getApi",value:function(){return this.api=this.api||{start:this.start,pause:this.pause,stop:this.stop,isStarted:this.isStarted,isPaused:this.isPaused,isStopped:this.isStopped,isCompleted:this.isCompleted}}},{key:"getRenderProps",value:function(){var e=this.props,o=e.daysInHours,l=e.zeroPadTime,u=e.zeroPadDays,m=this.state.timeDelta;return Object.assign(Object.assign({},m),{api:this.getApi(),props:this.props,formatted:De(m,{daysInHours:o,zeroPadTime:l,zeroPadDays:u})})}},{key:"render",value:function(){if(this.legacyMode){var e=this.props,o=e.count,l=e.children,u=e.onComplete;return a.createElement(X,{ref:this.legacyCountdownRef,count:o,onComplete:u},l)}var m=this.props,c=m.className,h=m.overtime,g=m.children,d=m.renderer,y=this.getRenderProps();if(d)return d(y);if(g&&this.state.timeDelta.completed&&!h)return a.cloneElement(g,{countdown:y});var v=y.formatted,x=v.days,T=v.hours,w=v.minutes,b=v.seconds;return a.createElement("span",{className:c},y.total<0?"-":"",x,x?":":"",T,":",w,":",b)}}]),s}(a.Component);E.defaultProps=Object.assign(Object.assign({},Y),{controlled:!1,intervalDelay:1e3,precision:0,autoStart:!0});E.propTypes={date:p.oneOfType([p.instanceOf(Date),p.string,p.number]),daysInHours:p.bool,zeroPadTime:p.number,zeroPadDays:p.number,controlled:p.bool,intervalDelay:p.number,precision:p.number,autoStart:p.bool,overtime:p.bool,className:p.string,children:p.element,renderer:p.func,now:p.func,onMount:p.func,onStart:p.func,onPause:p.func,onStop:p.func,onTick:p.func,onComplete:p.func};const ze=({data:n})=>{const{gameStarted:t,setIsFinished:s,won:r,setGameStarted:e,timeDifference:o,setTimeDifference:l}=a.useContext(P);a.useState("00:00");const u=()=>i("span",{children:"Time finished!"}),m=({hours:d,minutes:y,seconds:v,milliseconds:x,completed:T})=>T?i(u,{}):f("span",{children:[S(y),":",S(v)]}),c=()=>{l(d=>[...d,new Date])},h=async()=>{try{(await fetch("/gameplays/create",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":n.csrfToken},body:JSON.stringify({user_id:n.authUser.id,is_finished:!1,playtime:"00:00:00"})})).ok&&(G("Your result submitted successfully"),setTimeout(()=>{location.reload()},1e3))}catch(d){console.log(d)}};return i(L,{label:"Time",icon:i(ge,{}),children:t?i(E,{intervalDelay:200,precision:3,onStart:c,onComplete:d=>{s(!0),e(!1),h()},date:Date.now()+3*60*1e3,renderer:m}):"00:00"})},ke=a.memo(ze);function Me(){const n=ee.map((t,s)=>f("tr",{children:[i("td",{children:t.prizeIndex}),i("td",{children:t.prizeAmount}),i("td",{children:t.type})]},t.prizeIndex));return f(te,{withBorder:!0,withColumnBorders:!0,children:[i("thead",{children:f("tr",{children:[i("th",{children:"Prize position"}),i("th",{children:"Prize Amount"}),i("th",{children:"Prize Type"})]})}),i("tbody",{children:n})]})}const Ne=({data:n})=>{const{won:t,moves:s,finishingTime:r,timeDifference:e}=a.useContext(P),[o,l]=a.useState(!1);return i("div",{className:"flex flex-col justify-center  items-center gap-2",children:f("div",{className:"flex flex-row md:flex-col gap-4 justify-between",children:[!t&&i(ke,{data:n}),t&&f(J,{children:[i(L,{icon:i(pe,{}),children:i("div",{children:f("h3",{children:[" Congratulations You have finished the puzzle ",r," !"]})})}),i("button",{disabled:o,className:"bg-[#576CBC] hover:bg-[#0B2447] text-white font-bold py-2 px-4  focus:outline-none rounded-xl",onClick:async()=>{l(!0);const m=new Date(e[0]),h=new Date(e[1])-m;function g(d){const y=Math.floor(d/6e4),v=Math.floor(d%6e4/1e3),x=d%1e3,T=y<10?`0${y}`:`${y}`,w=v<10?`0${v}`:`${v}`,b=x<10?`00${x}`:x<100?`0${x}`:`${x}`;return`${T}:${w}:${b}`}try{(await fetch("/gameplays/create",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":n.csrfToken},body:JSON.stringify({user_id:n.authUser.id,is_finished:!0,playtime:`${g(h)}`})})).ok&&(G("Your result submitted successfully"),setTimeout(()=>{location.reload()},1e3))}catch(d){l(!1),console.log(d)}},children:"Submit Result"})]})]})})},Oe=a.memo(Ne),_e=({data:n})=>{var y,v;const{board:t,game:s,start:r,togglePause:e,size:o}=a.useContext(_),{isFinished:l,setGameStarted:u}=a.useContext(P),[m,c]=he(),[h,g]=a.useState(null);if(a.useEffect(()=>{if(!o)return;const x=m<639,T=m<768,w=m-(x?50:T?100:220),b=c-(T?160:60),D=Math.floor(w/((o==null?void 0:o.x)||1)),R=Math.floor(b/((o==null?void 0:o.y)||1));g(T?Math.min(D,R):Math.min(D-100,R-100))},[o,m,c]),!o||!t)return null;const d=()=>{var x;((x=n==null?void 0:n.authUser)==null?void 0:x.remaining_game)>0&&(u(!0),r())};return i("div",{className:"flex items-center game-board flex-col  p-0 rounded",children:f("div",{className:"relative bg-[#ddd6] overflow-hidden",style:{width:o.x*h,height:o.y*h},children:[!!t&&!s.pauseTime&&t.map(x=>i(ae,{...x,cellSize:h},x.id)),!s.startTime&&f(M,{onClick:d,children:[((y=n==null?void 0:n.authUser)==null?void 0:y.remaining_game)>0?"Click Here to Play":i("a",{href:"/order",children:`"Don't have chance? Please buy tickets"`}),((v=n==null?void 0:n.authUser)==null?void 0:v.remaining_game)>0&&i(Q,{className:"text-5xl"})]}),l&&i(M,{children:"You couldn't solve the puzzle in time!!"}),!!s.pauseTime&&f(M,{onClick:e,children:["Resume Game Pause",i(Z,{className:"text-5xl"})]})]})})};function Ee({data:n}){const[t,s]=a.useState(0),[r,e]=a.useState(0),o=async()=>{try{(await(await fetch(`/gameplays/${n.authUser.id}/info`)).json()).data&&(s(n.authUser.total_playable_game),e(n.authUser.remaining_game))}catch{}};return a.useEffect(()=>{o()},[]),i("article",{className:"max-w-[280px] rules flex items-center justify-center",children:f("div",{children:[f("h2",{className:"text-left text-2xl  text-gray-100 leading-8 font-semibold",children:["You bought"," ",f("span",{className:"text-green-500",children:[t," "]})," ","tickets and already attended"," ",f("span",{className:"text-green-500",children:[t-r," "]})," ","games, you have"," ",f("span",{className:"text-green-500",children:[r," "]})," ","chances left!"," "]}),i("h1",{className:"text-2xl font-bold tracking-wide leading-[60px] text-gray-100 ",children:"Rules Of The Game!"}),f("ul",{className:"mb-8 space-y-4 text-left text-gray-100 dark:text-gray-400",children:[f("li",{className:"flex items-center space-x-3",children:[i("svg",{className:"flex-shrink-0 w-5 h-5 text-gray-100 dark:text-green-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:i("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),i("span",{className:"text-gray-100 text-lg leading-7",children:"You can play the puzzle one time for each ticket purchase"})]}),f("li",{className:"flex items-center space-x-3",children:[i("svg",{className:"flex-shrink-0 w-5 h-5 text-gray-100 dark:text-green-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:i("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),i("span",{className:"text-gray-100 text-lg leading-7",children:"Once you started the game, you can't pause."})]}),f("li",{className:"flex items-center space-x-3",children:[i("svg",{className:"flex-shrink-0 w-5 h-5 text-gray-100 dark:text-green-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:i("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),i("span",{className:"text-gray-100 text-lg leading-7",children:"Try to Finish the game fastest time possible."})]}),f("li",{className:"flex items-center space-x-3",children:[i("svg",{className:"flex-shrink-0 w-5 h-5 text-gray-100 dark:text-green-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:i("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),i("span",{className:"text-gray-100 text-lg leading-7",children:"After solving the puzzle submit result."})]}),f("li",{className:"flex items-center space-x-3",children:[i("svg",{className:"flex-shrink-0 w-5 h-5 text-gray-100 dark:text-green-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:i("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),f("span",{className:"text-gray-100 text-lg leading-7",children:[" ","Fastest ten puzzle solver win the prize."]})]})]})]})})}const Re=({data:n})=>f("div",{className:" gap-12 wrapper game-screen",children:[i(Ee,{data:n}),f(oe,{children:[f("div",{className:"flex flex-col gap-3 md:mt-0 mt-20",children:[i(Oe,{data:n}),i(F,{children:i(_e,{data:n})})]}),i("div",{className:"pools",children:i(Me,{})})]})]}),Ie=({children:n})=>f("div",{className:"bg-cover  relative overflow-auto bg-center object-cover",style:{backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:[i("div",{className:"relative",children:i("header",{className:"absolute inset-x-0 z-20 py-4 sm:fixed sm:h-24 bg-[#587AAA]  sm:py-6 ",children:f("div",{className:"mx-auto flex h-full max-w-7xl items-center justify-between px-6 lg:px-8",children:[i(ne,{}),i("a",{href:"/participants",className:"font-medium md:block hidden ml-5 text-gray-600 hover:text-gray-900",children:"Participants"}),f("nav",{className:"flex items-center justify-between sm:ml-16 sm:w-full",children:[i("div",{className:"hidden gap-10 sm:flex"}),i("a",{href:"/order",className:"rounded-full  bg-black px-5 py-2.5 font-medium text-white hover:bg-gray-900",children:"Buy Ticket"})]})]})})}),i("div",{className:"min-h-screen z-50   flex items-center mx-auto justify-between max-w-7xl",children:i("div",{className:"flex flex-col md:justify-center py-7 md:py-32 md:flex-row gap-6 p-4 top-0 left-0 right-0 bottom-0 absolute game-screen ",children:n})})]});function je({data:n}){return i(Ie,{children:i(Re,{data:n})})}window.React=K;function Ae({authUser:n,csrfToken:t}){return f(F,{children:[i(se,{}),i(je,{data:{authUser:n,csrfToken:t}})]})}if(document.getElementById("game")){const n=document.getElementById("game"),t=q(n);let s=n.dataset.csrf_token,r=n.dataset.authuser;t.render(i(Ae,{csrfToken:s,authUser:r&&JSON.parse(r)}))}
