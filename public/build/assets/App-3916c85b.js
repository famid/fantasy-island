import{r as a,a as t,j as e,R as C,c as O,F as T}from"./clsx.m-340daf83.js";import{Q as E,k}from"./ReactToastify-2767fbe6.js";import{d as S}from"./uitls-6342bc87.js";const g=n=>E(n,{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"});function j({csrf:n}){const[r,l]=a.useState(""),[i,c]=a.useState(""),[f,m]=a.useState(!1),[b,h]=a.useState(""),[w,u]=a.useState("LOGIN");return t("div",{className:"max-w-md mx-auto h-full flex justify-center items-center flex-col  rounded-lg overflow-hidden",children:[e("header",{className:"mb-8 text-2xl md:text-3xl font-semibold text-center text-white",children:e("h1",{children:"Login To Buy Tickets And Have A Chance To Win Prizes!"})}),t("div",{className:"py-4 px-6 bg-[#A5D7E8] rounded-lg md:w-[400px] w-[300px]",children:[e("h2",{className:"text-2xl font-bold mb-2",children:"Login"}),t("form",{children:[t("div",{className:"mb-4",children:[e("label",{htmlFor:"phone",className:"block text-gray-700 font-bold mb-2",children:"Phone Number"}),e("input",{value:r,onChange:o=>l(o.target.value),type:"tel",name:"phone",id:"phone",className:" appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none ",required:!0})]}),t("div",{className:"mb-4",children:[e("label",{htmlFor:"password",className:"block text-gray-700 font-bold mb-2",children:"Password"}),e("input",{value:i,onChange:o=>c(o.target.value),type:"password",name:"password",id:"password",className:" appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none ",required:!0})]}),e("div",{className:"mb-4",children:t("button",{onClick:async o=>{o.preventDefault(),m(!0),h("");try{const p=await(await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":n},body:JSON.stringify({phone:r,password:i})})).json();p.success?(g("Logged in successfully"),window.location.href=`${S}/order`):g(p.message)}catch{h("Something went wrong. Please try again later.")}m(!1)},type:"button",className:" bg-[#E94E77] hover:bg-[#C15B8A] w-full text-white font-bold py-2 px-4 rounded focus:outline-none ",id:"send-otp",children:[" ",w]})}),t("div",{className:"mb-4 flex gap-2 justify-center items-center",children:[e("p",{className:"block text-gray-700 font-medium ",children:"Don't have account sign up!"}),e("a",{className:"block text-blue-700 font-semibold ",href:"/order",children:"Sign Up"})]})]})]})]})}function F({csrf:n}){const[r,l]=a.useState(""),[i,c]=a.useState(""),[f,m]=a.useState(""),[b,h]=a.useState(""),[w,u]=a.useState(!1),[P,o]=a.useState(""),[y,p]=a.useState("SEND OTP"),[N,v]=a.useState(!1);return a.useEffect(()=>{N&&p("RESEND OTP")},[N]),t("div",{className:"max-w-md mx-auto h-full flex justify-center items-center flex-col  rounded-lg overflow-hidden",children:[e("header",{className:"mb-8 text-2xl md:text-3xl font-semibold text-center",children:e("h1",{className:"text-white",children:"Buy Tickets And Have A Chance To Win Prizes!"})}),e("div",{className:"py-4 px-6 bg-[#A5D7E8] rounded-lg md:w-[400px] w-[300px]",children:t("form",{children:[t("div",{className:"mb-4",children:[e("label",{htmlFor:"name",className:"block text-gray-700 font-bold mb-2",children:"Name"}),e("input",{value:r,onChange:s=>l(s.target.value),type:"text",name:"name",id:"name",className:" appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none ",required:!0})]}),t("div",{className:"mb-4",children:[e("label",{htmlFor:"phone",className:"block text-gray-700 font-bold mb-2",children:"Phone Number"}),e("input",{value:i,onChange:s=>c(s.target.value),type:"tel",name:"phone",id:"phone",className:" appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none ",required:!0})]}),t("div",{className:"mb-4",children:[e("label",{htmlFor:"password",className:"block text-gray-700 font-bold mb-2",children:"Password"}),e("input",{value:f,onChange:s=>m(s.target.value),type:"password",name:"password",id:"password",className:" appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none ",required:!0})]}),e("div",{className:"mb-4",children:t("button",{onClick:async s=>{s.preventDefault(),u(!0),o("");try{const d=await fetch("/register",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":n},body:JSON.stringify({name:r,phone:i,password:f})});if(d.ok)v(!0),g("OTP sent to your phone");else{v(!1);const x=await d.json();o(x.message)}}catch{o("Something went wrong. Please try again later.")}u(!1)},type:"button",className:"bg-[#E94E77] hover:bg-[#C15B8A] text-white font-bold py-2 px-4 rounded focus:outline-none ",id:"send-otp",children:[" ",y]})}),t("div",{className:"mb-4",children:[e("label",{htmlFor:"otp",className:"block text-gray-700 font-bold mb-2",children:"OTP"}),e("input",{value:b,onChange:s=>h(s.target.value),type:"text",name:"otp",id:"otp",className:" appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none ",required:!0})]}),e("div",{className:"mb-4",children:e("button",{onClick:async s=>{s.preventDefault(),u(!0);try{const d=await fetch("/verify-otp",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":n},body:JSON.stringify({phone_verification_code:b,phone:i})});if(d.ok)g("Phone verification successful"),setTimeout(()=>{window.location.href=`${S}/order`},1500);else{const x=await d.json();o(x.message)}}catch{o("Something went wrong. Please try again later.")}u(!1)},type:"submit",className:"bg-[#E94E77] hover:bg-[#C15B8A] text-white font-bold py-2 px-4 rounded focus:outline-none ",children:"Verify OTP"})})]})})]})}window.React=C;function B({csrf:n,authUser:r,page:l}){return t(T,{children:[e(k,{}),l==="signin"&&e(j,{csrf:n}),l==="signup"&&e(F,{csrf:n})]})}if(document.getElementById("auth")){const n=document.getElementById("auth"),r=O(n);let l=n.dataset.csrf_token,i=n.dataset.authuser,c=n.dataset.page;r.render(e(B,{page:c,csrf:l,authUser:i}))}
